(this["webpackJsonpblockchain-gui"]=this["webpackJsonpblockchain-gui"]||[]).push([[0],{339:function(e,t,n){e.exports=n(788)},344:function(e,t,n){},414:function(e,t){},417:function(e,t){},420:function(e,t){},424:function(e,t){},425:function(e,t){},450:function(e,t){},452:function(e,t){},462:function(e,t){},464:function(e,t){},499:function(e,t){},501:function(e,t){},517:function(e,t){},518:function(e,t){},588:function(e,t){},786:function(e,t,n){},788:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(13),i=n.n(s),o=(n(344),n(33)),l=n.n(o),c=n(85),p=n(7),u=n(10),d=n(18),m=n(16),y=n(148),g=n(19),f=n(123),h=n(71),b=n(213),v=n(23),_=n(214),E=n(794),T=n(795),w=n(796),k=n(792),O=n(793),M=n(797),S=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.contract,t=e.provider_id,n=e.name,a=e.address,s=e.phone,i=e.consentInfo;return r.a.createElement(O.a,{title:"Provider's Identifier: "+t},r.a.createElement(M.a,{layout:"vertical",bordered:!0},r.a.createElement(M.a.Item,{label:"Name"},n),r.a.createElement(M.a.Item,{label:"Address"},a),r.a.createElement(M.a.Item,{label:"Phone number"},s)),r.a.createElement(O.a,{style:{marginTop:16},type:"inner",title:"Consent Information"},i))}}]),t}(a.Component),j=n(229),x=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={result:null,provider_id:null,consent_status:null,loading:null},n.provider_search=function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n.setState({feedbackMessage:null}),a=new j(window.ethereum),r=new a.eth.Contract(JSON.parse('[ { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" }, { "internalType": "string", "name": "_name", "type": "string" }, { "internalType": "string", "name": "_street", "type": "string" }, { "internalType": "string", "name": "_state", "type": "string" }, { "internalType": "string", "name": "_phone", "type": "string" }, { "internalType": "string", "name": "_providers_consent_info", "type": "string" } ], "name": "add_provider", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "administrator", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" }, { "internalType": "bool", "name": "_consent", "type": "bool" } ], "name": "change_consent", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" } ], "name": "consent_status", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "list_providers", "outputs": [ { "components": [ { "internalType": "address", "name": "id", "type": "address" }, { "internalType": "string", "name": "name", "type": "string" }, { "internalType": "string", "name": "street", "type": "string" }, { "internalType": "string", "name": "state", "type": "string" }, { "internalType": "string", "name": "phone", "type": "string" }, { "internalType": "string", "name": "consent_info", "type": "string" } ], "internalType": "struct HIE.Provider[]", "name": "", "type": "tuple[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "", "type": "address" } ], "name": "providers_info", "outputs": [ { "internalType": "address", "name": "id", "type": "address" }, { "internalType": "string", "name": "name", "type": "string" }, { "internalType": "string", "name": "street", "type": "string" }, { "internalType": "string", "name": "state", "type": "string" }, { "internalType": "string", "name": "phone", "type": "string" }, { "internalType": "string", "name": "consent_info", "type": "string" } ], "stateMutability": "view", "type": "function" } ]'),"0x4f7E59674B9Ca987E0d099817daA6FD7649fd8dB"),e.next=7,window.ethereum.request({method:"eth_requestAccounts"});case 7:return s=e.sent,e.next=10,r.methods.providers_info(n.state.provider_id).call({},(function(e,t){n.setState({result:{provider_id:n.state.provider_id,name:t.name,address:t.street,phone:t.phone,consentInfo:t.consent_info}})}));case 10:return e.next=12,r.methods.consent_status(n.state.provider_id).call({from:s[0]},(function(e,t){n.setState({consent_status:t})}));case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),n.setState({result:null}),n.setState({feedbackMessage:"Error: "+e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.change_consent=function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=!n.state.consent_status,n.setState({loading:!0}),n.setState({feedbackMessage:null}),e.prev=4,r=new j(window.ethereum),e.next=8,window.ethereum.request({method:"eth_requestAccounts"});case 8:return s=e.sent,i=new r.eth.Contract(JSON.parse('[ { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" }, { "internalType": "string", "name": "_name", "type": "string" }, { "internalType": "string", "name": "_street", "type": "string" }, { "internalType": "string", "name": "_state", "type": "string" }, { "internalType": "string", "name": "_phone", "type": "string" }, { "internalType": "string", "name": "_providers_consent_info", "type": "string" } ], "name": "add_provider", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "administrator", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" }, { "internalType": "bool", "name": "_consent", "type": "bool" } ], "name": "change_consent", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" } ], "name": "consent_status", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "list_providers", "outputs": [ { "components": [ { "internalType": "address", "name": "id", "type": "address" }, { "internalType": "string", "name": "name", "type": "string" }, { "internalType": "string", "name": "street", "type": "string" }, { "internalType": "string", "name": "state", "type": "string" }, { "internalType": "string", "name": "phone", "type": "string" }, { "internalType": "string", "name": "consent_info", "type": "string" } ], "internalType": "struct HIE.Provider[]", "name": "", "type": "tuple[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "", "type": "address" } ], "name": "providers_info", "outputs": [ { "internalType": "address", "name": "id", "type": "address" }, { "internalType": "string", "name": "name", "type": "string" }, { "internalType": "string", "name": "street", "type": "string" }, { "internalType": "string", "name": "state", "type": "string" }, { "internalType": "string", "name": "phone", "type": "string" }, { "internalType": "string", "name": "consent_info", "type": "string" } ], "stateMutability": "view", "type": "function" } ]'),"0x4f7E59674B9Ca987E0d099817daA6FD7649fd8dB"),e.next=12,i.methods.change_consent(n.state.provider_id,a).send({from:s[0],to:"0x4f7E59674B9Ca987E0d099817daA6FD7649fd8dB",chainId:5});case 12:n.setState({consent_status:a}),a?n.setState({feedbackMessage:"Sucessfully granted consent"}):n.setState({feedbackMessage:"Sucessfully revoked consent"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.setState({feedbackMessage:"Error: "+e.t0.message});case 19:return e.prev=19,n.setState({loading:!1}),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E.a,{className:"header-container",title:"Search for Provider"}),r.a.createElement(T.a,{className:"container",onSubmit:this.provider_search},r.a.createElement(w.a.Group,{compact:!0,className:"container"},r.a.createElement(w.a,{style:{width:400,textAlign:"center",borderRight:0},placeholder:"Provider's Identifier",onChange:function(t){return e.setState({provider_id:t.target.value})}}),r.a.createElement(_.a,{icon:"search",type:"primary",onClick:this.provider_search},"Search"),r.a.createElement("br",null),r.a.createElement("br",null)),this.state.result&&r.a.createElement(S,{contract:this.state.result}),r.a.createElement("br",null),r.a.createElement("br",null),this.state.result&&!this.state.consent_status&&r.a.createElement(_.a,{icon:"user-add",type:"primary",onClick:this.change_consent}," Consent  "),this.state.result&&this.state.consent_status&&r.a.createElement(_.a,{icon:"user-delete",type:"primary",onClick:this.change_consent}," Revoke  "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),this.state.loading&&r.a.createElement("center",null," ",r.a.createElement(k.a,{tip:"Blockchain is processing the transaction",size:"large"})," "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),this.state.feedbackMessage&&r.a.createElement("center",null,r.a.createElement("h3",{className:"error"}," ",this.state.feedbackMessage," ")," ")))}}]),t}(a.Component),C=n(88),I=n(229),N=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).retrieve=function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new I(window.ethereum),r=new a.eth.Contract(JSON.parse('[ { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" }, { "internalType": "string", "name": "_name", "type": "string" }, { "internalType": "string", "name": "_street", "type": "string" }, { "internalType": "string", "name": "_state", "type": "string" }, { "internalType": "string", "name": "_phone", "type": "string" }, { "internalType": "string", "name": "_providers_consent_info", "type": "string" } ], "name": "add_provider", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "administrator", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" }, { "internalType": "bool", "name": "_consent", "type": "bool" } ], "name": "change_consent", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "_provider", "type": "address" } ], "name": "consent_status", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "list_providers", "outputs": [ { "components": [ { "internalType": "address", "name": "id", "type": "address" }, { "internalType": "string", "name": "name", "type": "string" }, { "internalType": "string", "name": "street", "type": "string" }, { "internalType": "string", "name": "state", "type": "string" }, { "internalType": "string", "name": "phone", "type": "string" }, { "internalType": "string", "name": "consent_info", "type": "string" } ], "internalType": "struct HIE.Provider[]", "name": "", "type": "tuple[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "", "type": "address" } ], "name": "providers_info", "outputs": [ { "internalType": "address", "name": "id", "type": "address" }, { "internalType": "string", "name": "name", "type": "string" }, { "internalType": "string", "name": "street", "type": "string" }, { "internalType": "string", "name": "state", "type": "string" }, { "internalType": "string", "name": "phone", "type": "string" }, { "internalType": "string", "name": "consent_info", "type": "string" } ], "stateMutability": "view", "type": "function" } ]'),"0x4f7E59674B9Ca987E0d099817daA6FD7649fd8dB"),e.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:return s=e.sent,e.next=8,r.methods.list_providers().call({from:s[0]},(function(e,t){if(n.setState({values:[],provider_id:[],name:[],address:[],phone:[],consentInfo:[],timestamp:[]}),0==t.length)n.setState({feedbackMessage:!0});else{n.setState({feedbackMessage:!1});for(var a=0;a<t.length;a++)n.setState((function(e){return{values:[].concat(Object(C.a)(e.values),[""])}})),n.setState((function(e){return{provider_id:[].concat(Object(C.a)(e.provider_id),[t[a].id])}})),n.setState((function(e){return{name:[].concat(Object(C.a)(e.name),[t[a].name])}})),n.setState((function(e){return{address:[].concat(Object(C.a)(e.address),[t[a].street])}})),n.setState((function(e){return{phone:[].concat(Object(C.a)(e.phone),[t[a].phone])}})),n.setState((function(e){return{consentInfo:[].concat(Object(C.a)(e.consentInfo),[t[a].consent_info])}}))}}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),n.state={values:[],provider_id:[],name:[],address:[],phone:[],consentInfo:[],timestamp:[],feedbackMessage:null},n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"createUI",value:function(){var e=this;return this.state.values.map((function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(S,{contract:{provider_id:e.state.provider_id[n],name:e.state.name[n],address:e.state.address[n],phone:e.state.phone[n],consentInfo:e.state.consentInfo[n]}}),r.a.createElement("br",null),r.a.createElement("br",null))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{className:"container"},r.a.createElement("center",null,r.a.createElement("br",null),r.a.createElement(_.a,{icon:"bars",type:"primary",onClick:this.retrieve.bind(this)}," Retrieve Providers  "),r.a.createElement("br",null),r.a.createElement("br",null)),this.createUI(),r.a.createElement("br",null),r.a.createElement("br",null),this.state.feedbackMessage&&r.a.createElement("center",null,r.a.createElement("h3",{className:"error"}," No provider has been granted consent. "))))}}]),t}(a.Component),A=(n(786),n(333)),P=n.n(A),B=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={logged_in:null},n.login=n.login.bind(Object(y.a)(n)),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){document.title="Online Consent Management"}},{key:"login",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P()();case 2:if(t=e.sent,"undefined"!==typeof window.ethereum?console.log("Wallet is installed!"):console.log("Wallet is not installed"),!t){e.next=14;break}return e.next=7,window.ethereum.request({method:"eth_requestAccounts"});case 7:return n=e.sent,e.next=10,window.ethereum.request({method:"eth_chainId"});case 10:5!=(a=e.sent)?alert("Please change the network to Goerli"):(console.log("Login successful"),console.log("User id: "+n[0]),console.log("Chain id: "+a),this.setState({logged_in:!0})),e.next=15;break;case 14:alert("Please install MetaMask!");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement("div",{className:"nav-container"},r.a.createElement("h1",{style:{textAlign:"center",margin:0,color:"#1890ff",fontSize:32}},"Online Consent Management"),this.state.logged_in&&r.a.createElement(b.a,{mode:"horizontal",style:{position:"relative",display:"flex",justifyContent:"center"},className:"nav"},r.a.createElement(b.a.Item,{key:"search"},r.a.createElement(f.b,{to:"/add"},r.a.createElement(v.a,{type:"search"}),"Search for Provider")),r.a.createElement(b.a.Item,{key:"retrieve"},r.a.createElement(f.b,{to:"/list"},r.a.createElement(v.a,{type:"unordered-list"}),"List Providers")))),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/"},this.state.logged_in?r.a.createElement(h.a,{to:"/add"}):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement(_.a,{icon:"deployment-unit",type:"primary",onClick:this.login},"Connect")," ",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(f.b,{to:"/remove"}))),this.state.logged_in&&r.a.createElement(h.b,{path:"/add",render:function(){return r.a.createElement(x,null)}}),this.state.logged_in&&r.a.createElement(h.b,{path:"/list",render:function(){return r.a.createElement(N,null)}})))}}]),t}(a.Component);i.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[339,1,2]]]);
//# sourceMappingURL=main.fe80386c.chunk.js.map